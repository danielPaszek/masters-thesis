,CONSOLIDATED STATEMENTS OF OPERATIONS - USD ($)  $ in Thousands,12 Months Ended,12 Months Ended,12 Months Ended
,CONSOLIDATED STATEMENTS OF OPERATIONS - USD ($)  $ in Thousands,"Dec. 31, 2018","Dec. 31, 2017","Dec. 31, 2016"
0,Revenues:,,,
1,Total revenues,"$ 1,881,883","$ 1,536,216","$ 1,105,719"
2,Costs and expenses:,,,
3,Cost of product revenues (including definite-lived intangible amortization),94123,79479,58187
4,Research and development,1197957,1326134,581861
5,"Selling, general and administrative",434407,366286,303251
6,Change in fair value of acquisition-related contingent consideration,26173,7704,17422
7,Total costs and expenses,1752660,1779603,960721
8,Income (loss) from operations,129223,"(243,387)",144998
9,"Other income (expense), net",31760,17153,4412
10,Interest expense,"(1,543)","(6,900)","(38,745)"
11,Unrealized loss on long term investments,"(44,093)","(24,275)","(3,261)"
12,Expense related to senior note conversions,,"(54,881)",
13,Income (loss) before provision for income taxes,115347,"(312,290)",107404
14,Provision for income taxes,5854,852,3182
15,Net income (loss),"$ 109,493","$ (313,142)","$ 104,222"
16,Net income (loss) per share:,,,
17,Basic,$ 0.52,$ (1.53),$ 0.55
18,Diluted,$ 0.51,$ (1.53),$ 0.54
19,Shares used in computing net income (loss) per share:,,,
20,Basic,212383000,204580000,187873000
21,Diluted,215635000,204580000,194125000
22,"Product revenues, net",,,
23,Revenues:,,,
24,Total revenues,"$ 1,466,900","$ 1,200,312","$ 882,404"
25,Product royalty revenues,,,
26,Revenues:,,,
27,Total revenues,234780,160791,110711
28,Milestone and contract revenues,,,
29,Revenues:,,,
30,Total revenues,180000,175000,112512
31,Other revenues,,,
32,Revenues:,,,
33,Total revenues,$ 203,$ 113,$ 92
