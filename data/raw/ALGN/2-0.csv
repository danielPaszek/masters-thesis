,"CONSOLIDATED STATEMENTS OF OPERATIONS - USD ($)  shares in Thousands, $ in Thousands",12 Months Ended,12 Months Ended,12 Months Ended
,"CONSOLIDATED STATEMENTS OF OPERATIONS - USD ($)  shares in Thousands, $ in Thousands","Dec. 31, 2021","Dec. 31, 2020","Dec. 31, 2019"
0,Income Statement [Abstract],,,
1,Net revenues,"$ 3,952,584","$ 2,471,941","$ 2,406,796"
2,Cost of net revenues,1017229,708706,662899
3,Gross profit,2935355,1763235,1743897
4,"Selling, General and Administrative Expense",1708640,1200757,1072053
5,Operating expenses:,,,
6,Research and development,250315,175307,157361
7,"Impairments and other charges (gains), net",0,0,22990
8,Litigation settlement gain,0,0,"(51,000)"
9,Total operating expenses,1958955,1376064,1201404
10,Income from operations,976400,387171,542493
11,Interest income,3103,3125,12482
12,"Other income (expense), net",32920,"(11,347)",7676
13,"Interest Income and Other Income (Expense), Net",36023,"(8,222)",20158
14,Net income before provision for (benefit from) income taxes and equity in losses of investee,1012423,378949,562651
15,Provision for (benefit from) income taxes,240403,"(1,396,939)",112347
16,"Equity in losses of investee, net of tax",0,0,7528
17,Net income,"$ 772,020","$ 1,775,888","$ 442,776"
18,Net income per share:,,,
19,Basic (usd per share),$ 9.78,$ 22.55,$ 5.57
20,Diluted (usd per share),$ 9.69,$ 22.41,$ 5.53
21,Shares used in computing net income per share:,,,
22,Basic (shares),78917,78760,79424
23,Diluted (shares),79670,79230,80100
